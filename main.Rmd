---
title: "main"
author: "Wrzesie≈Ñ Wojciech, Grudkowski Artur"
date: "22 05 2021"
output: html_document
---

```{r setup, include=FALSE}
source('./src/project_setup.R')
```

```{r load_src_files}
source('./src/load_data.R')
source('./src/transform_types.R')
source('./src/show_base_stats.R')
source('./src/remove_missing_vals.R')
source('./src/add_dummy_vars.R')
source('./src/create_model_formula.R')
source('./src/fit_model.R')
```


# Load data
```{r}
data <- load_data()

train_base <- data$train
# test <- data$test
```

# Print base stats
```{r}
print(train_base)
show_base_stats(train_base)
```

# Transform data
```{r}
  categorical_vars_names <- c('city', 
                              'gender', 
                              'relevent_experience', 
                              'enrolled_university',
                              'education_level',
                              'major_discipline',
                              'experience',
                              'company_size',
                              'company_type',
                              'last_new_job')

train_transformed <- train_base %>% transform_types(categorical_vars_names) %>% remove_missing_vals

# Remove useless columns
train_transformed <- train_transformed %>% select(!c("enrollee_id", "city", "company_size"))

print(train_transformed)
show_base_stats(train_transformed)
```
# Add dummy vars
```{r}
model_vars <- c('gender', 
                'relevent_experience', 
                'education_level',
                'major_discipline',
                'experience',
                'company_type',
                'last_new_job')
# Dropp city !!!!
dummy_model_formula <- create_model_formula('target', model_vars)
dummy_model <- dummyVars(dummy_model_formula, data=train)

train_transformed <- train_transformed %>% add_dummy_vars(dummy_model)
print(train)
```

# Train model
```{r}
train("test")
```

# Test model
## Predict
```{r}
# add prediction funciton 
```

## Calculate AOC
```{r}
#add aoc
```

# Test
```{r}
# # Set seed
# set.seed(123)

# # Data
# x = rnorm(5)
# x2 = rnorm(5)
# y = rnorm(5)

# # Model frame
# model.frame(y ~ x * x2, data = data.frame(x = x, y = y, x2=x2))
# model.frame(y ~ x : x2, data = data.frame(x = x, y = y, x2=x2))
# model.frame(y ~ x + x2, data = data.frame(x = x, y = y, x2=x2))
```